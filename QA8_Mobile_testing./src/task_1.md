# Сравнительный анализ сервисов для распространения тестовых приложений iOS

**Контекст:** Команда QA стартапа по разработке финансовых приложений для iOS с ограниченным бюджетом.

**Цель:** Выбрать оптимальный сервис для распространения тестовых сборок среди QA-инженеров и бета-тестеров.

## Сравнительная таблица сервисов

| Критерий | **Apple TestFlight** | **Crashlytics** (через Firebase) | **BrowserStack** |
| :--- | :--- | :--- | :--- |
| **Стоимость** | **Бесплатно** (включен в подписку Apple Developer $99/год) | **Бесплатно** (базовые функции, до 100 тестировщиков) | **Платный** (от $29/мес за индивидуальный план, есть корпоративные тарифы) |
| **Простота настройки для разработчика** | **Средняя**<br>• Интеграция через Xcode и App Store Connect<br>• Необходимо создавать группы тестировщиков<br>• Загрузка билдов через веб-интерфейс или API | **Высокая**<br>• Простая настройка через Firebase Console<br>• Интеграция через CocoaPods/SPM<br>• Автоматизация через CLI или CI/CD<br>• Объединен с аналитикой и мониторингом крашей | **Высокая**<br>• Удобный веб-интерфейс<br>• Загрузка APK/IPA файлов или интеграция с CI/CD<br>• Поддержка автоматических тестов |
| **Простота установки для тестировщика** | **Очень высокая**<br>• Приглашение по email<br>• Установка через официальное приложение TestFlight из App Store<br>• Знакомый и безопасный процесс | **Средняя**<br>• Приглашение по email со ссылкой<br>• Необходимо добавить устройство в доверенные в Firebase<br>• Установка через Safari с дополнительными шагами | **Высокая (для облачного тестирования)**<br>• Доступ через веб-браузер<br>• Тестирование на эмуляторах/симуляторах<br>• **Нет установки на реальные устройства тестировщиков** |
| **Ограничения** | • **90 дней** на каждый билд<br>• До **100** внутренних тестировщиков (команда)<br>• До **10 000** внешних тестировщиков<br>• **Модерация Apple** для внешнего теста (1-2 дня)<br>• Только iOS/iPadOS/tvOS | • **100 тестировщиков** максимум в бесплатном тарифе<br>• Необходимо регистрировать **UDID устройств** для Ad-Hoc<br>• Менее официальный процесс установки<br>• Зависимость от сервисов Google | • **Нет реального распространения** на устройства тестировщиков<br>• Только облачное тестирование на виртуальных устройствах<br>• Требует стабильного интернет-соединения<br>• Не подходит для тестирования специфических функций (Touch ID/Face ID, акселерометр и др.) |
| **Основное назначение** | Бета-распространение на реальные устройства пользователей | Бета-распространение + мониторинг крашей + аналитика | Облачное тестирование на множестве виртуальных устройств |
| **Ключевая особенность** | Официальный бесплатный инструмент от Apple | Лучший в своем классе мониторинг стабильности | Огромный парк устройств и браузеров |

## Рекомендация для стартапа

**Рекомендуемый сервис: Apple TestFlight**

**Аргументация:**

1. **Наиболее релевантное решение для задачи**
   - BrowserStack предназначен для **облачного тестирования**, а не для распространения билдов на реальные устройства тестировщиков
   - Нам нужно именно распространение приложения для ручного тестирования и бета-тестирования, а не тестирование на виртуальных устройствах

2. **Бюджетная эффективность**
   - TestFlight: бесплатно (уже включен в стоимость аккаунта разработчика)
   - Crashlytics: бесплатно, но с ограничениями
   - BrowserStack: платный (от $29/мес), что для стартапа с ограниченным бюджетом может быть значительной статьей расходов

3. **Оптимальная простота для финансового приложения**
   - Тестировщики (включая нетехнических специалистов) легко устанавливают приложение через TestFlight
   - Процесс установки максимально безопасен и доверителен для финансового приложения
   - Crashlytics требует дополнительных шагов по доверению устройства, что может вызывать вопросы

4. **Покрытие реальных сценариев использования**
   - TestFlight позволяет тестировать на реальных устройствах пользователей
   - BrowserStack предоставляет только виртуальные устройства, что не подходит для тестирования:
     - Биометрической аутентификации (Face ID/Touch ID)
     - Поведения при плохом соединении
     - Взаимодействия с другими приложениями на устройстве
     - Фоновых процессов

5. **Юридическая и техническая корректность**
   - TestFlight — официальный канал Apple, что важно для финансового приложения
   - Все билды проходят базовую проверку Apple, добавляя дополнительный уровень контроля качества

**Стратегия комбинированного использования:**

1. **Основной канал:** TestFlight для всего бета-тестирования
2. **Дополнительный инструмент:** Crashlytics для быстрой раздачи билдов разработческой команде (если нужна скорость без модерации)
3. **Специализированное тестирование:** Рассмотреть BrowserStack или аналоги ТОЛЬКО если понадобится кросс-браузерное тестирование веб-версии или быстрая проверка на разных версиях iOS (но не для основного тестирования)

**Вывод:** Для стартапа, разрабатывающего финансовое приложение для iOS, **TestFlight является безусловно лучшим выбором**. Он полностью бесплатен, максимально прост для тестировщиков, безопасен и позволяет тестировать на реальных устройствах пользователей. BrowserStack, несмотря на свои преимущества для определенных задач, не решает нашу основную задачу — распространение билдов для ручного тестирования. Crashlytics мог бы быть альтернативой, но уступает TestFlight в простоте для конечных тестировщиков и официальном статусе, что критично для финансового приложения.

# Чек-лист тестирования внешних прерываний для финансового приложения iOS

## Общая информация
**Цель:** Проверка устойчивости финансового приложения к внешним воздействиям и сохранение целостности данных пользователя при любых прерываниях.

**Приоритетность тестирования:**
- **Критический** – Транзакции, безопасность данных
- **Высокий** – Основной функционал, навигация
- **Средний** – Второстепенные функции, UI/UX

---

## Таблица чек-листа внешних прерываний

| № | Категория | Тип прерывания | Конкретные сценарии | Приоритет | Ожидаемое поведение |
|---|-----------|----------------|---------------------|-----------|----------------------|
| 1 | **Системные вызовы** | Входящий звонок | 1. Во время подтверждения перевода<br>2. При вводе PIN-кода<br>3. В процессе Face ID/Touch ID | Критический | • Данные формы сохраняются<br>• Без повторного списания<br>• Перезапуск аутентификации |
| 2 | | Входящее SMS | 1. SMS с кодом 2FA от приложения<br>2. SMS от других банков<br>3. Системные SMS от оператора | Высокий | • Код 2FA автоматически подставляется<br>• UI не перекрывается критически<br>• Приложение не крашится |
| 3 | **Системные алерты** | Низкий заряд | 1. 20% - предупреждение<br>2. 10% - второе предупреждение<br>3. 5% - экстренное | Средний | • Предупреждение корректно отображается<br>• Функционал сохраняется<br>• Данные не теряются |
| 4 | | Перегрев устройства | Во время активного использования приложения | Средний | • Системное предупреждение<br>• Возможность сохранить данные<br>• Безопасное закрытие |
| 5 | **Аппаратные кнопки** | Кнопка Home | 1. При активной транзакции<br>2. С конфиденциальными данными на экране<br>3. Во время загрузки данных | Критический | • Чувствительные данные скрываются<br>• Фоновая задача завершается корректно<br>• Состояние сохраняется |
| 6 | |Кнопка блокировки | 1. Блокировка во время работы<br>2. Автоблокировка через 30 сек/1 мин<br>3. Пробуждение по отпечатку | Критический | • Требуется повторная аутентификация<br>• Сессия сохраняется согласно настройкам<br>• Данные защищены |
| 7 | |Кнопки громкости | Во время: 1. Звуковых подсказок<br>2. Голосового ассистента<br>3. Звуковых уведомлений | Средний | • Громкость регулируется корректно<br>• UI приложения не ломается<br>• Функционал не прерывается |
| 8 | **Сетевые изменения** | Потеря соединения | 1. При подтверждении платежа<br>2. Во время загрузки выписки<br>3. При синхронизации данных | Критический | • Четкое сообщение об ошибке<br>• Возможность повтора операции<br>• Отсутствие двойного списания |
| 9 | | Смена типа сети | 1. Wi-Fi → 4G/5G<br>2. 4G → 3G → 2G<br>3. Мобильные данные → Wi-Fi | Высокий | • Автоматическое переподключение<br>• Без потери данных<br>• Индикация типа сети |
| 10 | | Авиарежим | 1. Включение во время транзакции<br>2. Циклическое включение/выключение<br>3. Длительное отключение | Высокий | • Корректное сообщение о недоступности<br>• Кэширование данных при возможности<br>• Восстановление при появлении сети |
| 11 | **Межприложенные взаимодействия** | Уведомления других приложений | 1. Банковские пуши конкурентов<br>2. Мессенджеры<br>3. Почтовые уведомления | Высокий | • Баннеры не ломают UI<br>• Тап по уведомлению не крашит приложение<br>• Возврат в прежнее состояние |
| 12 | | Overlay-окна | 1. Меню "Поделиться"<br>2. Контекстное меню копирования<br>3. Picture-in-picture видео | Средний | • Интерфейс адаптируется<br>• Функционал доступен после закрытия<br>• Данные не теряются |
| 13 | | Запросы разрешений | 1. Камера для сканирования QR<br>2. Контакты для перевода<br>3. Геолокация для отделений | Высокий | • Запрос в правильный момент<br>• Работа при отказе<br>• Возможность изменить решение |
| 14 | **Системные события** | Поворот экрана | 1. При заполнении длинных форм<br>2. Во время просмотра графиков<br>3. В процессе анимации | Высокий | • Данные формы сохраняются<br>• Layout корректно перестраивается<br>• Позиция скролла сохраняется |
| 15 | | Изменение системных настроек | 1. Смена языка<br>2. Изменение региона<br>3. Формат даты/времени | Высокий | • Автоматическая локализация<br>• Без перезапуска приложения<br>• Корректное отображение валют |
| 16 | | Режимы энергосбережения | 1. Автоматический при 20%<br>2. Ручное включение<br>3. Сверхнизкое энергопотребление | Высокий | • Фоновые процессы ограничиваются<br>• Push-уведомления работают<br>• Основной функционал доступен |
| 17 | **Пользовательские сценарии** | Переключение между приложениями | 1. Смахивание в меню многозадачности<br>2. Быстрое переключение между 3+ прил.<br>3. Долгое удержание для закрытия | Высокий | • Состояние сохраняется<br>• Память корректно освобождается<br>• Возврат в то же место |
| 18 | | Биометрическая аутентификация | 1. Неудачная попытка Face ID/Touch ID<br>2. Изменение биометрики в настройках<br>3. Принудительная аутентификация | Критический | • Fallback на PIN-код<br>• Безопасный сброс сессии<br>• Корректная повторная попытка |
| 19 | | Подключение периферии | 1. Подключение/отключение зарядки<br>2. Наушников/Bluetooth устройств<br>3. Кард-ридера или терминала | Средний | • Интерфейс не ломается<br>• Зарядка не влияет на безопасность<br>• Поддержка внешних устройств |

---

## Критерии оценки успешности теста

1. **Данные сохраняются** – Введенная информация не теряется после прерывания
2. **Безопасность соблюдается** – Конфиденциальные данные защищены
3. **Стабильность приложения** – Приложение не крашится и не зависает
4. **Корректное восстановление** – Пользователь может продолжить с того же места
5. **Информирование пользователя** – Понятные сообщения о статусе операции

## Частота тестирования
- **Каждый релиз:** Все сценарии с приоритетом "Критический"
- **Каждый спринт:** Все сценарии с приоритетом "Высокий"  
- **Раз в квартал:** Все сценарии из чек-листа
# Сравнение сервисов для тестирования iOS приложений

## Выбор сервиса для стартапа

**Рекомендуем: TestFlight**
- **Бесплатно** с аккаунтом разработчика ($99/год)
- **Просто для тестировщиков** - установка через App Store
- **Официальный инструмент Apple** - безопасность и доверие
- **Ограничения:** 90 дней на билд, модерация 1-2 дня

**Альтернативы:**
- **Firebase App Distribution:** бесплатно, но сложнее установка
- **BrowserStack:** платный ($29+/мес), только облачное тестирование

---
# 3 наиболее критичных прерывания для финансового приложения и сценарии тестирования
(Критичность определяется рисками: потеря денег, утечка данных, прерывание важной операции.)

**1. Прерывание: Входящий звонок во время ввода/подтверждения платежа.**<br>
Почему критично?<br> Риск сбоя транзакции: деньги могут списаться, но не дойти до получателя, или наоборот. Возможна утечка конфиденциальных данных (реквизитов) на экране входящего вызова, если приложение не скрыло их должным образом.

**Сценарий тестирования:**
**Предусловие:** Пользователь находится на экране подтверждения платежа (виден номер карты, сумма, получатель).<br>
**Шаги:** 1) Начать процесс оплаты (нажать "Подтвердить"). 2) Во время обработки (или прямо перед тапом) совершить входящий звонок на тестовое устройство. 3) Принять звонок, поговорить 10 секунд. 4) Завершить звонок.
**Ожидаемый результат:** После возврата в приложение пользователь видит четкий результат транзакции (успех/неудача) или безопасное состояние (возврат на предыдущий экран с сохраненными, но скрытыми данными). Данные карты не видны в миниатюре вызова. Сессия не разлогинена.

**2. Прерывание: Переключение между Wi-Fi и мобильным интернетом (или потеря сети) при выполнении операции.**<br>
Почему критично? Финансовые операции чувствительны к целостности сетевой сессии. Может привести к созданию дублирующих транзакций (двойное списание) или к неконсистентному состоянию приложения (деньги списаны локально, но сервер не получил подтверждения).
**Сценарий тестирования:**
**Предусловие:** Начать операцию перевода средств.
**Шаги:** 1) Нажать "Перевести". 2) В момент отправки запроса на сервер (или получения ответа) отключить Wi-Fi, чтобы устройство переключилось на мобильную сеть (или включить "Режим полета" на 2-3 секунды). 3) Дождаться восстановления связи.
**Ожидаемый результат:** Приложение либо корректно завершает операцию при восстановлении связи, показывая итог, либо показывает понятное сообщение об ошибке с инструкцией ("Проверьте соединение и статус операции в истории"). Не должно быть возможности повторно нажать "Перевести" без перезагрузки данных.

**3. Прерывание: Блокировка экрана/Переход в фоновый режим при работе с конфиденциальной информацией.**<br>
Почему критично? Прямой риск утечки финансовых данных. Если приложение не скрывает данные по таймауту или при переходе в фон, они могут быть видны любому, кто возьмет телефон. Также это вопрос безопасности сессии.

**Сценарий тестирования:**
**Предусловие:** Пользователь авторизован и находится на экране с конфиденциальными данными (например, "История операций", "Детали карты").
**Шаги:** 1) Свернуть приложение (перейти в домашний экран). 2) Заблокировать устройство кнопкой питания. 3) Разблокировать устройство через 10 секунд (по отпечатку/пин-коду). 4) Вернуться в приложение через список недавних приложений (switcher).
**Ожидаемый результат:** При возврате в приложение либо требуется повторная авторизация (пароль/биометрия), либо экран автоматически скрыт/заблокирован (например, показан splash-screen или запрос на биометрию). Конфиденциальные данные (номера карт, суммы) не должны быть видны мгновенно.

## Сообщение коллеге об утечке памяти

1.  **Длительная работа в активном режиме (например, сравнение разных тарифов или оформление сложной заявки):**
    *   **Проявление:** Приложение начинает работать медленнее, "подтормаживать" при переходах между экранами. В конце концов может неожиданно закрыться (краш), особенно если пользователь переключается на другие тяжелые приложения (камера, навигация). Это похоже на то, как если бы вы долго держали открытыми десятки вкладок в браузере.

2.  **Работа приложения в фоновом режиме (ожидание push-уведомления о подтверждении перевода):**
    *   **Проявление:** Система iOS может полностью завершить наше "протекающее" приложение, чтобы освободить память для других задач. В результате пользователь не получит важное уведомление, либо при следующем открытии приложение запустится заново (с экрана splash), а не вернется к прерванной операции.

3.  **Многократный запуск одного и того же сценария (повторная авторизация, оформление нескольких подряд быстрых платежей):**
    *   **Проявление:** Потребление памяти с каждым новым циклом будет немного увеличиваться, даже если мы возвращаемся на стартовый экран. В какой-то момент это может привести к крашу. Проще всего это заметить, если 10-15 раз подряд выполнить один и тот же поток (войти → выйти, или добавить/удалить карту).

4.  **Переключение между разделами приложения (главная → история → профиль → настройки):**
    *   **Проявление:** Каждое открытие нового экрана добавляет "утекшей" памяти. После нескольких таких переходов старые экрана не освобождаются, и можно наблюдать рост потребления памяти в инструментах разработчика (Xcode Organizer). В итоге это приводит к общей нестабильности.


## Что такое утечка памяти в контексте работы мобильного приложения?

**Утечка памяти** — это программная ошибка, при которой приложение продолжает удерживать в оперативной памяти объекты, которые уже не используются. Вместо того чтобы быть корректно удаленными системой сборки мусора, эти объекты остаются в памяти, сокращая доступный объем ОЗУ.

**К чему это приводит:**
1.  **Снижение производительности:** Системе приходится "подчищать" память, что вызывает лаги.
2.  **Аварийное завершение (краш):** Когда свободная память заканчивается, операционная система (iOS или Android) принудительно закрывает самое "прожорливое" приложение, чтобы избежать паники всей системы.
3.  **Повышенный расход заряда батареи:** Постоянная работа с переполненной памятью требует больше энергии от процессора.



# Как утечка памяти проявляется в разных режимах работы приложения?

Ключевая проблема производительности — утечка памяти, когда приложение выделяет под свои задачи память устройства, но не возвращает её системе после завершения работы. Постепенно свободной памяти становится меньше, что приводит к сбоям.

## Как это может проявиться в наших режимах тестирования:
1. **Длительная работа в фоновом режиме (Background)**<br>
**Проявление:** Пользователь свернул приложение, чтобы ответить на сообщение или проверить почту. Через 10-15 минут он возвращается, и приложение перезапускается «с нуля» (виден сплэш-скрин), хотя должно было остаться на том же экране. Система убила наш процесс из-за нехватки памяти.<br>
2. **Частое переключение между приложениями (App Switching)**<br>
**Проявление:** При быстром переходе из нашего приложения в браузер и обратно с каждым разом интерфейс всё сильнее «подтормаживает», анимации становятся рваными. В конце концов, система может выбросить ошибку «Приложение не отвечает».<br>
3. **Возврат после кратковременного сворачивания (Pause/Resume)**<br>
**Проявление:** Приложение в целом работает, но в отдельных местах (например, на экране с прокручиваемым списком транзакций) возникают «фантомные» данные — видны старые операции, которые должны были обновиться, или изображения «прыгают». Это часто связано с утечкой старых View-компонентов.<br>
4. **Работа с тяжелыми операциями (например, загрузка PDF-выписок)**<br>
**Проявление:** При повторном открытии одного и того же большого файла приложение потребляет всё больше оперативной памяти с каждым разом, пока не произойдет сбой (краш) с соответствующим логом в Android Studio (обычно OutOfMemoryError).<br>



